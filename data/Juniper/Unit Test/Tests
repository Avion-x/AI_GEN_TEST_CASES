 ###STARTLIST###
[
  {
    "testname": "Class-Based Traffic Management", 
    "testcase": {
      "testname": "Class-Based Traffic Management",
      "objective": "Verify class-based traffic management features on MX960",
      "steps": [
        "Configure class-based policies and apply to interfaces", 
        "Generate traffic matching configured classes",
        "Verify policy actions are applied to matching traffic"
      ],
      "testdata": {
        "classes": [
          {
            "name": "voip", 
            "match": {
              "dscp": 46
            }
          },
          {
            "name": "tcp_traffic",
            "match": {
              "protocol": "tcp"
            }
          }
        ],
        "interfaces": [
          "ge-0/0/1",
          "ge-0/0/2" 
        ],
        "policy_actions": [
          {
            "class": "voip",
            "action": "priority-queue 1" 
          },
          {
            "class": "tcp_traffic", 
            "action": "rate-limit 1m"
          }
        ]
      }
    },
    "testscript": {
      "testname": "Class-Based Traffic Management",
      "objective": "Automate test case with Python",
      "file_name": "test_cbtm.py", 
      "init_scripts": [
        "pip install paramiko",
        "pip install netmiko",
        """
        import json
        from netmiko import ConnectHandler
        
        # Load test data
        testdata = ${json.dumps(a.testdata)} 
        testdata = json.loads(testdata)
        
        # SSH connect to DUT
        dut = {
          'device_type': 'juniper',
          'host': '192.168.0.1',
          'username': 'testuser',
          'password': 'test123' 
        }
        conn = ConnectHandler(**dut)
        """,
        "python test_cbtm.py",
        "Policies configured and verified successfully" 
      ]
    }
  }
]
###ENDLIST###